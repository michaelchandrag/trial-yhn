(()=>{"use strict";const t=class{constructor(){const t=document.querySelectorAll("div#article-content > p");if(t.length>0){this.paragraphs=[];for(const e of t.entries())this.paragraphs.push({count:e[0]+1,node:e[1]});this.total_paragraphs=this.paragraphs.length,this.furthest_paragraph_seen=0,this.furthest_scroll=0,this.scrollEventHandler=this.scrollEventHandler.bind(this),this.unloadEventHandler=this.unloadEventHandler.bind(this),window.addEventListener("scroll",this.scrollEventHandler),window.addEventListener("unload",this.unloadEventHandler)}}scrollEventHandler(){const t=[],e=window.scrollY||window.scrollTop||document.getElementsByTagName("html")[0].scrollTop;if(e>this.furthest_scroll){this.furthest_scroll=e;for(const e of this.paragraphs)this.isInViewport(e.node)?e.count>this.furthest_paragraph_seen&&(this.furthest_paragraph_seen=e.count):t.push(e);this.paragraphs=t}}unloadEventHandler(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"analyticsEvent",eventCategory:"interaction",eventAction:"view-depth",eventLabel:"story-paragraphs-viewed",eventValue:this.furthest_paragraph_seen/this.total_paragraphs*100,eventNonInt:!0})}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}};class e{constructor(){new t}}"interactive"===document.readyState||"complete"===document.readyState?new e:document.addEventListener("DOMContentLoaded",(()=>{new e}))})();