(()=>{var e,t,r={1995:(e,t,r)=>{"use strict";r.d(t,{TU:()=>i,bE:()=>s});const n="undefined"!=typeof SEATIMESCO&&SEATIMESCO.userMessaging&&SEATIMESCO.userMessaging.settings&&SEATIMESCO.userMessaging.settings.nonBlockingMessagesDelay?SEATIMESCO.userMessaging.settings.nonBlockingMessagesDelay:7e3,s={adBlock:1,autopay:n,billOverdue:n,creditCardExpiring:n,declinedPayment:n,generic:n,customData:n,newsletterBar:n,newsletterSplashDesktop:n,newsletterSplashMobile:n,paperlessBilling:n,paywall:1,upgradeBrowser:1},i={autopay:"st_autopay_seen",billOverdue:"st_bill_overdue_seen",creditCardExpiring:"st_cc_expire_seen",declinedPayment:"st_declined_payment_seen",generic:e=>`st_${e.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"_")}_seen`,customData:e=>`st_${e.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"_")}_seen`,newsletterBar:"st_newsletter_bar_seen",newsletterSplashDesktop:"st_newsletter_splash_desktop_seen",newsletterSplashMobile:"st_newsletter_splash_mobile_seen",paperlessBilling:"st_paperless_billing_seen"},o=([{value:"",label:"All"}].concat([{value:"mobile",label:"Mobile"},{value:"tablet",label:"Tablet"},{value:"desktop",label:"Desktop"}]),"undefined"!=typeof umDashboardData&&umDashboardData.paywallConfigs?umDashboardData.paywallConfigs:[]);[{value:"",label:"All"}].concat(o),"undefined"!=typeof umDashboardData&&umDashboardData.sections&&umDashboardData.sections,"undefined"!=typeof umDashboardData&&umDashboardData.sectionFronts&&umDashboardData.sectionFronts,"undefined"!=typeof umDashboardData&&umDashboardData.pages&&umDashboardData.pages,"undefined"!=typeof umDashboardData&&umDashboardData.newsletters&&umDashboardData.newsletters},8408:(e,t,r)=>{"use strict";r.d(t,{Ad:()=>n,ES:()=>p,Jd:()=>w,NX:()=>v,Nf:()=>y,ZV:()=>b,am:()=>h,bv:()=>g,ei:()=>l,ej:()=>c,fm:()=>f,kT:()=>d,pn:()=>i,q7:()=>s,wn:()=>u});const n=(e,t,r)=>{const n=window.SEATIMESCO.singleSignOn.info.accountType,s=e+"-"+n+"-"+t;window.dataLayer.push({ecommerce:{promoView:{promotions:[{id:s,name:s}]}}});let i="meter message displayed";"hard"==e&&(i="wall message displayed");let o=n+" "+t;r&&(o+=" "+r);const a={meteredStoryCount:t,userType:n,meterDisplayType:e};window.STEventManager.dataLayerEvent("meterEvent","meter",i,o,null,null,a)},s=(e,t,r,n)=>{const s=window.SEATIMESCO.singleSignOn.info.accountType,i=s+" "+r+" "+t,o={meteredStoryCount:r,userType:s,meterDisplayType:t};window.STEventManager.dataLayerEvent("meterEvent","meter",e,i,null,null,o)},i=e=>{const t=o("y"),r=t+document.documentElement.clientHeight,n=a(e,"y"),s=n+e.offsetHeight;return n-300<=r&&s>=r||s+300>=t&&n<=t},o=e=>{let t,r,n;switch("number"==typeof window.pageYOffset?(t=window.pageXOffset,r=window.pageYOffset):(n=document.compatMode&&"CSS1Compat"===document.compatMode?document.documentElement:document.body,t=n.scrollLeft,r=n.scrollTop),e){case"x":return t;case"y":return r;default:return{x:t,y:r}}},a=(e,t)=>{const r=e.getBoundingClientRect(),n=r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s=r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);switch(t){case"x":return n;case"y":return s;default:return{x:n,y:s}}},l=()=>{let e="";return e=c("_ga"),e=e&&/(GA)\d+\.\d+\.\d+\.\d+/.test(e)?e.split(".").splice(2).join("."):"",e},c=e=>{const t=decodeURIComponent(document.cookie).split(";");for(let r=0;r<t.length;r++){const n=t[r].split("="),s=n[0].replace(/^\s+|\s+jQuery/g,""),i=n[1];if(s==e)return i}return!1},u=function(e,t,r,n,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Lax";const o=window.navigator.userAgent,a=o.indexOf("OS 12")>=0&&o.indexOf("Safari/index.html")>=0;let l=e+"="+encodeURIComponent(t)+";";r&&(l+="expires="+(r=new Date((new Date).getTime()+1e3*parseInt(r))).toGMTString()+";"),n&&(l+="path="+n+";"),s&&(l+="domain="+s+";"),a||(["Strict","Lax","None"].indexOf(i)>=0?l+="samesite="+i+";":l+="samesite=Lax;"),l+="secure;",document.cookie=l},d=e=>{c(e)&&(document.cookie=e+"=false;path=/;domain=seattletimes.com;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},p=e=>{const t=c(e);var r,n;t&&(r=e,n=t,window.localStorage.setItem(r,n),d(e))},g=e=>{window.localStorage.removeItem(e)},h=(e,t)=>e+(new RegExp(/(\?.+=.+)/).test(e)?"&":"?")+t,f=e=>e.charAt(0).toUpperCase()+e.slice(1),w=()=>SEATIMESCO.userMessaging&&SEATIMESCO.userMessaging.settings&&SEATIMESCO.userMessaging.settings.ssoEnv?SEATIMESCO.userMessaging.settings.ssoEnv:"secure.",y=(e,t,r,n)=>{window.SEATIMESCO&&window.STEventManager&&window.STEventManager.dataLayerEvent(e,t,r,n)},b=e=>fetch(e).then((e=>e.json())),v=e=>{var t,r;return"overlay"===e&&void 0!==(null===(t=window.SEATIMESCO.userMessaging.slots)||void 0===t?void 0:t.overlay.id)?null===(r=window.SEATIMESCO.userMessaging.slots)||void 0===r?void 0:r.overlay.id:"unknown"}},8552:(e,t,r)=>{var n=r(852)(r(5639),"DataView");e.exports=n},1989:(e,t,r)=>{var n=r(1789),s=r(401),i=r(7667),o=r(1327),a=r(1866);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,e.exports=l},8407:(e,t,r)=>{var n=r(7040),s=r(4125),i=r(2117),o=r(7518),a=r(4705);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,e.exports=l},7071:(e,t,r)=>{var n=r(852)(r(5639),"Map");e.exports=n},3369:(e,t,r)=>{var n=r(4785),s=r(1285),i=r(6e3),o=r(9916),a=r(5265);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,e.exports=l},3818:(e,t,r)=>{var n=r(852)(r(5639),"Promise");e.exports=n},8525:(e,t,r)=>{var n=r(852)(r(5639),"Set");e.exports=n},8668:(e,t,r)=>{var n=r(3369),s=r(619),i=r(2385);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=s,o.prototype.has=i,e.exports=o},6384:(e,t,r)=>{var n=r(8407),s=r(7465),i=r(3779),o=r(7599),a=r(4758),l=r(4309);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,e.exports=c},2705:(e,t,r)=>{var n=r(5639).Symbol;e.exports=n},1149:(e,t,r)=>{var n=r(5639).Uint8Array;e.exports=n},577:(e,t,r)=>{var n=r(852)(r(5639),"WeakMap");e.exports=n},6874:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},4963:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}},4636:(e,t,r)=>{var n=r(2545),s=r(5694),i=r(1469),o=r(4144),a=r(5776),l=r(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),u=!r&&s(e),d=!r&&!u&&o(e),p=!r&&!u&&!d&&l(e),g=r||u||d||p,h=g?n(e.length,String):[],f=h.length;for(var w in e)!t&&!c.call(e,w)||g&&("length"==w||d&&("offset"==w||"parent"==w)||p&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||a(w,f))||h.push(w);return h}},9932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}},2488:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}},2908:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},4865:(e,t,r)=>{var n=r(9465),s=r(7813),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var o=e[t];i.call(e,t)&&s(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},8470:(e,t,r)=>{var n=r(7813);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},9465:(e,t,r)=>{var n=r(8777);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},1848:e=>{e.exports=function(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}},1078:(e,t,r)=>{var n=r(2488),s=r(7285);e.exports=function e(t,r,i,o,a){var l=-1,c=t.length;for(i||(i=s),a||(a=[]);++l<c;){var u=t[l];r>0&&i(u)?r>1?e(u,r-1,i,o,a):n(a,u):o||(a[a.length]=u)}return a}},7786:(e,t,r)=>{var n=r(1811),s=r(327);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[s(t[r++])];return r&&r==i?e:void 0}},8866:(e,t,r)=>{var n=r(2488),s=r(1469);e.exports=function(e,t,r){var i=t(e);return s(e)?i:n(i,r(e))}},4239:(e,t,r)=>{var n=r(2705),s=r(9607),i=r(2333),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):i(e)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:(e,t,r)=>{var n=r(4239),s=r(7005);e.exports=function(e){return s(e)&&"[object Arguments]"==n(e)}},939:(e,t,r)=>{var n=r(2492),s=r(7005);e.exports=function e(t,r,i,o,a){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!=t&&r!=r:n(t,r,i,o,e,a))}},2492:(e,t,r)=>{var n=r(6384),s=r(7114),i=r(8351),o=r(6096),a=r(4160),l=r(1469),c=r(4144),u=r(6719),d="[object Arguments]",p="[object Array]",g="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,f,w,y){var b=l(e),v=l(t),S=b?p:a(e),m=v?p:a(t),E=(S=S==d?g:S)==g,T=(m=m==d?g:m)==g,M=S==m;if(M&&c(e)){if(!c(t))return!1;b=!0,E=!1}if(M&&!E)return y||(y=new n),b||u(e)?s(e,t,r,f,w,y):i(e,t,S,r,f,w,y);if(!(1&r)){var _=E&&h.call(e,"__wrapped__"),C=T&&h.call(t,"__wrapped__");if(_||C){var O=_?e.value():e,I=C?t.value():t;return y||(y=new n),w(O,I,r,f,y)}}return!!M&&(y||(y=new n),o(e,t,r,f,w,y))}},2958:(e,t,r)=>{var n=r(6384),s=r(939);e.exports=function(e,t,r,i){var o=r.length,a=o,l=!i;if(null==e)return!a;for(e=Object(e);o--;){var c=r[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=r[o])[0],d=e[u],p=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var g=new n;if(i)var h=i(d,p,u,e,t,g);if(!(void 0===h?s(p,d,3,i,g):h))return!1}}return!0}},8458:(e,t,r)=>{var n=r(3560),s=r(5346),i=r(3218),o=r(346),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||s(e))&&(n(e)?p:a).test(o(e))}},8749:(e,t,r)=>{var n=r(4239),s=r(1780),i=r(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&s(e.length)&&!!o[n(e)]}},7206:(e,t,r)=>{var n=r(1573),s=r(6432),i=r(6557),o=r(1469),a=r(9601);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?s(e[0],e[1]):n(e):a(e)}},280:(e,t,r)=>{var n=r(5726),s=r(6916),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},1573:(e,t,r)=>{var n=r(2958),s=r(1499),i=r(2634);e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},6432:(e,t,r)=>{var n=r(939),s=r(7361),i=r(9095),o=r(5403),a=r(9162),l=r(2634),c=r(327);e.exports=function(e,t){return o(e)&&a(t)?l(c(e),t):function(r){var o=s(r,e);return void 0===o&&o===t?i(r,e):n(t,o,3)}}},5970:(e,t,r)=>{var n=r(3012),s=r(9095);e.exports=function(e,t){return n(e,t,(function(t,r){return s(e,r)}))}},3012:(e,t,r)=>{var n=r(7786),s=r(611),i=r(1811);e.exports=function(e,t,r){for(var o=-1,a=t.length,l={};++o<a;){var c=t[o],u=n(e,c);r(u,c)&&s(l,i(c,e),u)}return l}},371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9152:(e,t,r)=>{var n=r(7786);e.exports=function(e){return function(t){return n(t,e)}}},611:(e,t,r)=>{var n=r(4865),s=r(1811),i=r(5776),o=r(3218),a=r(327);e.exports=function(e,t,r,l){if(!o(e))return e;for(var c=-1,u=(t=s(t,e)).length,d=u-1,p=e;null!=p&&++c<u;){var g=a(t[c]),h=r;if("__proto__"===g||"constructor"===g||"prototype"===g)return e;if(c!=d){var f=p[g];void 0===(h=l?l(f,g,p):void 0)&&(h=o(f)?f:i(t[c+1])?[]:{})}n(p,g,h),p=p[g]}return e}},6560:(e,t,r)=>{var n=r(5703),s=r(8777),i=r(6557),o=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=o},2545:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},531:(e,t,r)=>{var n=r(2705),s=r(9932),i=r(1469),o=r(3448),a=n?n.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return s(t,e)+"";if(o(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7561:(e,t,r)=>{var n=r(7990),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,r)=>{var n=r(1469),s=r(5403),i=r(5514),o=r(9833);e.exports=function(e,t){return n(e)?e:s(e,t)?[e]:i(o(e))}},4429:(e,t,r)=>{var n=r(5639)["__core-js_shared__"];e.exports=n},7740:(e,t,r)=>{var n=r(7206),s=r(8612),i=r(3674);e.exports=function(e){return function(t,r,o){var a=Object(t);if(!s(t)){var l=n(r,3);t=i(t),r=function(e){return l(a[e],e,a)}}var c=e(t,r,o);return c>-1?a[l?t[c]:c]:void 0}}},8777:(e,t,r)=>{var n=r(852),s=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},7114:(e,t,r)=>{var n=r(8668),s=r(2908),i=r(4757);e.exports=function(e,t,r,o,a,l){var c=1&r,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var p=l.get(e),g=l.get(t);if(p&&g)return p==t&&g==e;var h=-1,f=!0,w=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++h<u;){var y=e[h],b=t[h];if(o)var v=c?o(b,y,h,t,e,l):o(y,b,h,e,t,l);if(void 0!==v){if(v)continue;f=!1;break}if(w){if(!s(t,(function(e,t){if(!i(w,t)&&(y===e||a(y,e,r,o,l)))return w.push(t)}))){f=!1;break}}else if(y!==b&&!a(y,b,r,o,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},8351:(e,t,r)=>{var n=r(2705),s=r(1149),i=r(7813),o=r(7114),a=r(8776),l=r(1814),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var g=a;case"[object Set]":var h=1&n;if(g||(g=l),e.size!=t.size&&!h)return!1;var f=p.get(e);if(f)return f==t;n|=2,p.set(e,t);var w=o(g(e),g(t),n,c,d,p);return p.delete(e),w;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:(e,t,r)=>{var n=r(8234),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,o,a){var l=1&r,c=n(e),u=c.length;if(u!=n(t).length&&!l)return!1;for(var d=u;d--;){var p=c[d];if(!(l?p in t:s.call(t,p)))return!1}var g=a.get(e),h=a.get(t);if(g&&h)return g==t&&h==e;var f=!0;a.set(e,t),a.set(t,e);for(var w=l;++d<u;){var y=e[p=c[d]],b=t[p];if(i)var v=l?i(b,y,p,t,e,a):i(y,b,p,e,t,a);if(!(void 0===v?y===b||o(y,b,r,i,a):v)){f=!1;break}w||(w="constructor"==p)}if(f&&!w){var S=e.constructor,m=t.constructor;S==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof m&&m instanceof m||(f=!1)}return a.delete(e),a.delete(t),f}},9021:(e,t,r)=>{var n=r(5564),s=r(5357),i=r(61);e.exports=function(e){return i(s(e,void 0,n),e+"")}},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},8234:(e,t,r)=>{var n=r(8866),s=r(9551),i=r(3674);e.exports=function(e){return n(e,i,s)}},5050:(e,t,r)=>{var n=r(7019);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},1499:(e,t,r)=>{var n=r(9162),s=r(3674);e.exports=function(e){for(var t=s(e),r=t.length;r--;){var i=t[r],o=e[i];t[r]=[i,o,n(o)]}return t}},852:(e,t,r)=>{var n=r(8458),s=r(7801);e.exports=function(e,t){var r=s(e,t);return n(r)?r:void 0}},9607:(e,t,r)=>{var n=r(2705),s=Object.prototype,i=s.hasOwnProperty,o=s.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var s=o.call(e);return n&&(t?e[a]=r:delete e[a]),s}},9551:(e,t,r)=>{var n=r(4963),s=r(479),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return i.call(e,t)})))}:s;e.exports=a},4160:(e,t,r)=>{var n=r(8552),s=r(7071),i=r(3818),o=r(8525),a=r(577),l=r(4239),c=r(346),u="[object Map]",d="[object Promise]",p="[object Set]",g="[object WeakMap]",h="[object DataView]",f=c(n),w=c(s),y=c(i),b=c(o),v=c(a),S=l;(n&&S(new n(new ArrayBuffer(1)))!=h||s&&S(new s)!=u||i&&S(i.resolve())!=d||o&&S(new o)!=p||a&&S(new a)!=g)&&(S=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return h;case w:return u;case y:return d;case b:return p;case v:return g}return t}),e.exports=S},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,r)=>{var n=r(1811),s=r(5694),i=r(1469),o=r(5776),a=r(1780),l=r(327);e.exports=function(e,t,r){for(var c=-1,u=(t=n(t,e)).length,d=!1;++c<u;){var p=l(t[c]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&a(u)&&o(p,u)&&(i(e)||s(e))}},1789:(e,t,r)=>{var n=r(4536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,r)=>{var n=r(4536),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(t,e)?t[e]:void 0}},1327:(e,t,r)=>{var n=r(4536),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:s.call(t,e)}},1866:(e,t,r)=>{var n=r(4536);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},7285:(e,t,r)=>{var n=r(2705),s=r(5694),i=r(1469),o=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||s(e)||!!(o&&e&&e[o])}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},5403:(e,t,r)=>{var n=r(1469),s=r(3448),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!s(e))||o.test(e)||!i.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,r)=>{var n,s=r(4429),i=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},9162:(e,t,r)=>{var n=r(3218);e.exports=function(e){return e==e&&!n(e)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,r)=>{var n=r(8470),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():s.call(t,r,1),--this.size,0))}},2117:(e,t,r)=>{var n=r(8470);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7518:(e,t,r)=>{var n=r(8470);e.exports=function(e){return n(this.__data__,e)>-1}},4705:(e,t,r)=>{var n=r(8470);e.exports=function(e,t){var r=this.__data__,s=n(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}},4785:(e,t,r)=>{var n=r(1989),s=r(8407),i=r(7071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||s),string:new n}}},1285:(e,t,r)=>{var n=r(5050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).get(e)}},9916:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).has(e)}},5265:(e,t,r)=>{var n=r(5050);e.exports=function(e,t){var r=n(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},2634:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},4523:(e,t,r)=>{var n=r(8306);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},4536:(e,t,r)=>{var n=r(852)(Object,"create");e.exports=n},6916:(e,t,r)=>{var n=r(5569)(Object.keys,Object);e.exports=n},1167:(e,t,r)=>{e=r.nmd(e);var n=r(1957),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s&&n.process,a=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},5357:(e,t,r)=>{var n=r(6874),s=Math.max;e.exports=function(e,t,r){return t=s(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=s(i.length-t,0),l=Array(a);++o<a;)l[o]=i[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=i[o];return c[t]=r(l),n(e,this,c)}}},5639:(e,t,r)=>{var n=r(1957),s="object"==typeof self&&self&&self.Object===Object&&self,i=n||s||Function("return this")();e.exports=i},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},61:(e,t,r)=>{var n=r(6560),s=r(1275)(n);e.exports=s},1275:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var s=t(),i=16-(s-n);if(n=s,i>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},7465:(e,t,r)=>{var n=r(8407);e.exports=function(){this.__data__=new n,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,r)=>{var n=r(8407),s=r(7071),i=r(3369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!s||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(o)}return r.set(e,t),this.size=r.size,this}},5514:(e,t,r)=>{var n=r(4523),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,(function(e,r,n,s){t.push(n?s.replace(i,"$1"):r||e)})),t}));e.exports=o},327:(e,t,r)=>{var n=r(3448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},5703:e=>{e.exports=function(e){return function(){return e}}},3279:(e,t,r)=>{var n=r(3218),s=r(7771),i=r(4841),o=Math.max,a=Math.min;e.exports=function(e,t,r){var l,c,u,d,p,g,h=0,f=!1,w=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=l,n=c;return l=c=void 0,h=t,d=e.apply(n,r)}function v(e){var r=e-g;return void 0===g||r>=t||r<0||w&&e-h>=u}function S(){var e=s();if(v(e))return m(e);p=setTimeout(S,function(e){var r=t-(e-g);return w?a(r,u-(e-h)):r}(e))}function m(e){return p=void 0,y&&l?b(e):(l=c=void 0,d)}function E(){var e=s(),r=v(e);if(l=arguments,c=this,g=e,r){if(void 0===p)return function(e){return h=e,p=setTimeout(S,t),f?b(e):d}(g);if(w)return clearTimeout(p),p=setTimeout(S,t),b(g)}return void 0===p&&(p=setTimeout(S,t)),d}return t=i(t)||0,n(r)&&(f=!!r.leading,u=(w="maxWait"in r)?o(i(r.maxWait)||0,t):u,y="trailing"in r?!!r.trailing:y),E.cancel=function(){void 0!==p&&clearTimeout(p),h=0,l=g=c=p=void 0},E.flush=function(){return void 0===p?d:m(s())},E}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3311:(e,t,r)=>{var n=r(7740)(r(998));e.exports=n},998:(e,t,r)=>{var n=r(1848),s=r(7206),i=r(554),o=Math.max;e.exports=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var l=null==r?0:i(r);return l<0&&(l=o(a+l,0)),n(e,s(t,3),l)}},5564:(e,t,r)=>{var n=r(1078);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},7361:(e,t,r)=>{var n=r(7786);e.exports=function(e,t,r){var s=null==e?void 0:n(e,t);return void 0===s?r:s}},9095:(e,t,r)=>{var n=r(13),s=r(222);e.exports=function(e,t){return null!=e&&s(e,t,n)}},6557:e=>{e.exports=function(e){return e}},5694:(e,t,r)=>{var n=r(9454),s=r(7005),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return s(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,r)=>{var n=r(3560),s=r(1780);e.exports=function(e){return null!=e&&s(e.length)&&!n(e)}},4144:(e,t,r)=>{e=r.nmd(e);var n=r(5639),s=r(5062),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,l=(a?a.isBuffer:void 0)||s;e.exports=l},3560:(e,t,r)=>{var n=r(4239),s=r(3218);e.exports=function(e){if(!s(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,r)=>{var n=r(4239),s=r(7005);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},6719:(e,t,r)=>{var n=r(8749),s=r(1717),i=r(1167),o=i&&i.isTypedArray,a=o?s(o):n;e.exports=a},3674:(e,t,r)=>{var n=r(4636),s=r(280),i=r(8612);e.exports=function(e){return i(e)?n(e):s(e)}},8306:(e,t,r)=>{var n=r(3369);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(s.Cache||n),r}s.Cache=n,e.exports=s},7771:(e,t,r)=>{var n=r(5639);e.exports=function(){return n.Date.now()}},8718:(e,t,r)=>{var n=r(5970),s=r(9021)((function(e,t){return null==e?{}:n(e,t)}));e.exports=s},9601:(e,t,r)=>{var n=r(371),s=r(9152),i=r(5403),o=r(327);e.exports=function(e){return i(e)?n(o(e)):s(e)}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},3493:(e,t,r)=>{var n=r(3279),s=r(3218);e.exports=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return s(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),n(e,t,{leading:i,maxWait:t,trailing:o})}},8601:(e,t,r)=>{var n=r(4841);e.exports=function(e){return e?Infinity===(e=n(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,t,r)=>{var n=r(8601);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},4841:(e,t,r)=>{var n=r(7561),s=r(3218),i=r(3448),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=a.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):o.test(e)?NaN:+e}},9833:(e,t,r)=>{var n=r(531);e.exports=function(e){return null==e?"":n(e)}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e](i,i.exports,s),i.loaded=!0,i.exports}s.m=r,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>"st-user-messaging-"+({0:"customdata",13:"adblock",46:"newslettersignupinset",126:"declinedpayment",174:"autopay",349:"billoverdue",386:"newslettersignupslim",542:"newslettersignupsplashmobile",587:"genericbar",629:"paywallbar",761:"promotopoverlay",766:"newslettersignupsplashdesktop",821:"promopostscript",931:"paperlessbilling",954:"paywallmain",975:"creditcardexpiring",977:"newslettersignupbar",995:"newslettersignupblock"}[e]||e)+"-bundle.js?ver="+{0:"458b6f1d83efdd9d27f8",13:"d4b55755e14b1993f73a",46:"adf6398d60a33afee29d",126:"52f3ba7e9c4e027292d3",174:"d20d462ecfa696237ea0",259:"59452f0cd8a55eb439b0",349:"5dd1981169d8b6435e7f",386:"7c7d2e89a1eb870ec212",542:"5c9824cee7302a959cd7",587:"c17c523deed5145fddae",629:"a6248017453c38a0cb90",761:"c773c94314ac527ca18f",766:"f9652af3a4b99db69e41",821:"4fc54f6e6deac5a81223",931:"ac4d71fad2761dfe1f12",954:"eb4cb99b4ab36d71bc66",975:"b98a06a3b6125c662b7b",977:"04a3080d3deba2a558b6",990:"a2a209e3fce846e6cee8",995:"bc897c8a207f6921778f"}[e],s.miniCssF=e=>({0:"customdata",13:"adblock",46:"newslettersignupinset",126:"declinedpayment",174:"autopay",349:"billoverdue",386:"newslettersignupslim",542:"newslettersignupsplashmobile",587:"genericbar",629:"paywallbar",761:"promotopoverlay",766:"newslettersignupsplashdesktop",821:"promopostscript",931:"paperlessbilling",954:"paywallmain",975:"creditcardexpiring",977:"newslettersignupbar",995:"newslettersignupblock"}[e]+"-style.css"),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="st-user-messaging:",s.l=(r,n,i,o)=>{if(e[r])e[r].push(n);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[n];var p=(t,n)=>{a.onerror=a.onload=null,clearTimeout(g);var s=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/wp-content/plugins/st-user-messaging/dist/",(()=>{if("undefined"!=typeof document){var e={179:0};s.f.miniCss=(t,r)=>{e[t]?r.push(e[t]):0!==e[t]&&{0:1,13:1,46:1,126:1,174:1,349:1,386:1,542:1,587:1,629:1,761:1,766:1,821:1,931:1,954:1,975:1,977:1,995:1}[t]&&r.push(e[t]=(e=>new Promise(((t,r)=>{var n=s.miniCssF(e),i=s.p+n;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var s=(o=r[n]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){var o;if((s=(o=i[n]).getAttribute("data-href"))===e||s===t)return o}})(n,i))return t();((e,t,r,n,s)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=r=>{if(i.onerror=i.onload=null,"load"===r.type)n();else{var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,i.parentNode&&i.parentNode.removeChild(i),s(l)}},i.href=t,document.head.appendChild(i)})(e,i,0,t,r)})))(t).then((()=>{e[t]=0}),(r=>{throw delete e[t],r})))}}})(),(()=>{var e={179:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,s)=>n=e[t]=[r,s]));r.push(n[2]=i);var o=s.p+s.u(t),a=new Error;s.l(o,(r=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[o,a,l]=r,c=0;if(o.some((t=>0!==e[t]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);l&&l(s)}for(t&&t(r);c<o.length;c++)i=o[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=globalThis.webpackChunkst_user_messaging=globalThis.webpackChunkst_user_messaging||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=s(1995),t=s(8408);const r=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._data={},this._options={newsletterPrefsCookie:"st_newsletter_prefs",subscriberCookie:"st_subscriberdata",...e}}fetchUserType(){return this.getSubscriberCookie().then((e=>this.parseSubscriberCookie(e)))}parseSubscriberCookie(e){this.set("userType",this._determineUserType(e)),this.isSubscriber()&&(this.set("subscriberId",e[0]),this.set("autopay",e[1]),this.set("inGrace",e[2]),this.set("isSharedSubscriber",e[4]),this.set("isExpiring",e[5]),this.set("billOverdue",e[6]),this.set("paperless",e[7]))}_determineUserType(e){return-1==e?"registered":0==e?"print-replica":Array.isArray(e)?"subscriber":-2==e?"former":"anonymous"}getSubscriberCookie(){return new Promise((e=>{(0,t.ej)(this._options.subscriberCookie)?e(JSON.parse((0,t.ej)(this._options.subscriberCookie))):this.isLoggedIn()?e(this.reAuth()):e(null)}))}reAuth(){const e=this.getAuthURL(),r=this.getSessionToken();return e&&r?(0,t.ZV)(e+r).then((e=>{const r=e.st_subscriberdata;return(0,t.wn)(this._options.subscriberCookie,JSON.stringify(r),28800,"/",".seattletimes.com","None"),window.STEventManager.completedEvent("sso:subscriberDataCookieReady",JSON.stringify(r)),r})):null}get(e){return this._data[e]?this._data[e]:""}set(e,t){this._data[e]=t}isLoggedIn(){return!1!==(0,t.ej)("sessionToken")}getSessionToken(){return(0,t.ej)("sessionToken")}getAuthURL(){return window.SEATIMESCO&&window.SEATIMESCO.singleSignOn&&window.SEATIMESCO.singleSignOn.info&&window.SEATIMESCO.singleSignOn.info.subscriberSessionURL?window.SEATIMESCO.singleSignOn.info.subscriberSessionURL:""}isAnonymous(){return"anonymous"==this.get("userType")}isRegistered(){return"registered"==this.get("userType")}isSubscriber(){return"subscriber"==this.get("userType")}isOther(){return"print-replica"==this.get("userType")}isFormer(){return"former"==this.get("userType")}isSharedSubscriber(){return 1===this.get("isSharedSubscriber")}isFreeTrialUser(){return"FreeTrial"===this.get("subscriberId")}},n=class extends r{fetchData(){return Promise.all([this.getNewsletterPreferences(),this.getAdBlockUsage()]).then((e=>this.setResults(e))).catch((e=>{console.warn(e)}))}getNewsletterPreferences(){const e=SEATIMESCO.userMessaging.newsletters.userDataEndpoint;return this.isLoggedIn()?(0,t.ej)(this._options.newsletterPrefsCookie)?Promise.resolve({newsletterPrefs:JSON.parse((0,t.ej)(this._options.newsletterPrefsCookie))}):fetch(e,{method:"POST",credentials:"include"}).then((e=>{if(e.ok)return e.json();throw new Error("error fetching newsletter preferences")})).then((e=>{const r=e.data;return(0,t.wn)(this._options.newsletterPrefsCookie,JSON.stringify(r),31536e3,"/",".seattletimes.com","None"),{newsletterPrefs:r}})):Promise.resolve({newsletterPrefs:null})}async getAdBlockUsage(){if(this.isLoggedIn()||!window.SEATIMESCO.userMessaging.ab||!window.SEATIMESCO.userMessaging.ab.detectionEnabled)return{adBlockDrawbridge:!1};const e=SEATIMESCO.userMessaging&&SEATIMESCO.userMessaging.settings&&SEATIMESCO.userMessaging.settings.adBlockMessageTimeout||2e3,t=await window.STEventManager.subscribe(["adBlock:detection"],e);return{adBlockDrawbridge:!(t.timeout||!t.data["adBlock:detection"])&&t.data["adBlock:detection"]}}setResults(e){e.forEach((e=>{Object.keys(e).forEach((t=>{this._data[t]=e[t]}))}))}log(){console.warn("UserMessaging:",this._data)}isInAdBlockDrawbridgeTest(e){return!e||SEATIMESCO.userMessaging&&SEATIMESCO.userMessaging.settings&&SEATIMESCO.userMessaging.settings.adBlockABTest}shouldSeeAdBlockDrawbridge(){return this.get("adBlockDrawbridge")&&SEATIMESCO.browser&&SEATIMESCO.browser.layout&&SEATIMESCO.browser.layout.isDesktop}getUserTargeting(){return new Promise((e=>{e(this.getPrivateModeUsage())}))}async getPrivateModeUsage(){if(SEATIMESCO.browser&&SEATIMESCO.browser.privacy&&!1===SEATIMESCO.browser.privacy.detectionEnabled)return!1;const e=await window.STEventManager.subscribe(["paywallAvoidance:detection"],500);return!(e.timeout||!e.data["paywallAvoidance:detection"])&&e.data["paywallAvoidance:detection"]}hasInstitutionalAccess(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if("true"!==e)return!1;const s=(0,t.ej)(n);return!!s&&r.indexOf(s)>=0}isAlreadySubscribedToNewsletter(e){return Array.isArray(this.get("newsletterPrefs"))&&SEATIMESCO.userMessaging.newsletters&&SEATIMESCO.userMessaging.newsletters.emailsNewsroom&&SEATIMESCO.userMessaging.newsletters.emailsNewsroom[e]&&this.isNewsletterInUserPrefs(SEATIMESCO.userMessaging.newsletters.emailsNewsroom[e].listId)}isNewsletterInUserPrefs(e){return Array.isArray(this.get("newsletterPrefs"))&&this.get("newsletterPrefs").filter((t=>String(t)===String(e))).length>0}isFromNewsletter(){return"email"==(helpers?helpers.parseQueryString():"").utm_medium}hasSeenNewsletterSignup(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"splash-desktop";return"bar"===r?(0,t.ej)(e.TU.newsletterBar):"splash-desktop"===r?(0,t.ej)(e.TU.newsletterSplashDesktop):"splash-mobile"===r&&(0,t.ej)(e.TU.newsletterSplashMobile)}isAtLevel(e){switch(e){case 0:return!0;case 1:return this.isLoggedIn();case 2:return this.isSubscriber()||this.isOther();case 3:return this.isSubscriber();default:return!1}}hasExpiringCreditCard(){return 1===this.get("isExpiring")}hasSeenCreditCardExpiringNotification(){return(0,t.ej)(e.TU.creditCardExpiring)}hasDeclinedPayment(){return 1===this.get("inGrace")}hasSeenDeclinedPaymentMessage(){return(0,t.ej)(e.TU.declinedPayment)}isSignedUpForAutopay(){return 1===this.get("autopay")}hasSeenAutopayMessage(){return(0,t.ej)(e.TU.autopay)}isSignedUpForPaperless(){return 1===this.get("paperless")}hasSeenPaperlessBillingNotification(){return(0,t.ej)(e.TU.paperlessBilling)}hasOverdueBill(){return 1===this.get("billOverdue")}isInQueryString(e){return new URLSearchParams(window.location.search).get("stm")===e}hasSeenBillOverdueMessage(){return(0,t.ej)(e.TU.billOverdue)}hasSeenGenericMessage(r){return(0,t.ej)(e.TU.generic(r))}hasSeenCustomDataMessage(r){return(0,t.ej)(e.TU.customData(r))}},i=class{constructor(e){let{userType:t,meterCookie:r,messageCountCookie:n,institutionalCookie:s}=e;this.userType=t,this.meterCookie=r,this.paywallMessageCountCookie=n,this.institutionalUserCookie=s,this._settings={}}get(e){return this._settings[e]}set(e,t){this._settings[e]=t}reset(){return this._settings={}}setUserType(e){this.userType=e}parseConfig(){return this._getAllConfigs().then((e=>this._getCurrentConfig(e))).then((e=>(0,t.ZV)(e))).then((e=>{this.set("meterEnabled",e.paywall_enabled),this.set("messagesEnabled",e.messages_enabled),this.set("accessBlockingEnabled",e.access_blocking_enabled),this.set("registrationWallEnabled",e.registration_wall_enabled),this.set("expirationTime",this._convertExpirationTime(e.expiration_period)),this.set("excludedSectionsEnabled",e.section_exclusion_enabled),this.set("excludedSections",e.section_exclusion_list.split(",")),this.set("institutionalAccessEnabled",e.institutional_access_enabled),this.set("institutionalAccessIds",e.institutional_access_ids.split(",")),this.set("meterLimit",this._getMeterLimit(e.pageview_limit)),this.set("paywallRedirect",e.wall_redirect_location),this.set("meterClearingMechanism",e.clearing_mechanism),this.set("wallBehavior",e.wall_behavior)})).catch((e=>e))}_isMeterRunning(){return"subscriber"==this.userType?((0,t.bv)(this.meterCookie),(0,t.kT)(this.meterCookie),!1):!(!window.SEATIMESCO||!window.SEATIMESCO.paywall||!0!==window.SEATIMESCO.paywall.contentMetered)}_getAllConfigs(){return this._isMeterRunning()?window.SEATIMESCO&&window.SEATIMESCO.paywall&&window.SEATIMESCO.paywall.configs?Promise.resolve(window.SEATIMESCO.paywall.configs):window.SEATIMESCO&&window.SEATIMESCO.paywall&&window.SEATIMESCO.paywall.configsPath?(0,t.ZV)(window.SEATIMESCO.paywall.configsPath):Promise.reject(new Error("no paywall configs could be found")):Promise.reject(new Error("content is not metered"))}_getCurrentConfig(e){let t="";e.forEach((e=>{const r=e.target;if("all"==r)t=e.config;else{const n=r.split("=")[0],s=r.split("=")[1];this._isUserInSegment(n,s)&&(t=e.config)}}));const r=new RegExp(/paywallconfig\/(.*)\/$/).exec(t);return r&&this.set("configName",r[1]),t}_isUserInSegment(e,t){return"STSegment"==e?this._isUserInSTSegment(t):this._isUserInLocalSegment(e,t)}_isUserInLocalSegment(e,t){if(!window.localStorage.getItem(e))return!1;const r=window.localStorage.getItem(e).split(","),n=t.split(",");return r.filter((e=>n.indexOf(e)>=0)).length>0}_isUserInSTSegment(e){if(!window.SEATIMESCO||!window.SEATIMESCO.userSegments)return!1;const t=e.split(",");for(const e of t)if(void 0!==window.SEATIMESCO.userSegments[e])return!0;return!1}_getMeterLimit(e){return e[this.userType]&&parseInt(e[this.userType])?parseInt(e[this.userType]):(this.set("meterEnabled","false"),0)}messagesEnabled(){return"true"===this.get("messagesEnabled")}blockAccess(){"true"===this.get("accessBlockingEnabled")&&("anonymous"===this.userType&&"true"===this.get("registrationWallEnabled")?this._showRegistrationWall():window.SEATIMESCO.paywall.preventRedirect?window.STEventManager.completedEvent("paywall:triggered"):(window.STEventManager.completedEvent("paywall:triggered"),this._paywallRedirect()))}_paywallRedirect(){window.location.replace((0,t.am)(this.get("paywallRedirect"),`return=${document.location.href}`))}_showRegistrationWall(){if(!(window.SEATIMESCO&&window.SEATIMESCO.singleSignOn&&window.SEATIMESCO.singleSignOn.info&&window.SEATIMESCO.singleSignOn.info.ssoEnvironment))return void this._paywallRedirect();(0,t.Nf)("analyticsEvent","registrationWall","wallFrameMessage - article - displayed",""),document.body.classList.add("rw-on");const e=document.createElement("div");e.classList.add("registration-wall-container");const r=document.createElement("div");r.classList.add("registration-wall-overlay"),e.appendChild(r);const n=document.createElement("div");return n.classList.add("registration-wall"),n.innerHTML=`\n          <iframe src="https://${window.SEATIMESCO.singleSignOn.info.ssoEnvironment}seattletimes.com/embedded/registrationwall"></iframe>\n        `,e.appendChild(n),document.body.appendChild(e),e}getMeterStatus(){if(void 0!==this.get("meterStatus"))return this.get("meterStatus");const e=this._getMeterStatus();return this.set("meterStatus",e),this._makeViewCountAccessible(e),e}getIsInstitutionalUser(){return!!this._isInstitutionalUser((0,t.ej)(this.institutionalUserCookie))}_makeViewCountAccessible(e){if(window.SEATIMESCO&&window.SEATIMESCO.paywall){const t=this._fetchMeterLog(),r=null===t?0:this._getMeterCount(t);window.SEATIMESCO.paywall.articleCount=r,-1!==e&&"undefined"!=typeof events&&window.STEventManager.completedEvent("paywall:articleCountSet")}}_getMeterStatus(){if((0,t.ES)(this.meterCookie),"true"!==this.get("meterEnabled")||!this._isMeterRunning())return 0;if(this._isInstitutionalUser((0,t.ej)(this.institutionalUserCookie)))return 0;let e=0,r=this._fetchMeterLog();return r=this._removeExpiredViews(r),this._isPageAlreadySeen(r)?0:!1!==window.SEATIMESCO.paywall.pageExcluded||this._isSectionExcluded()?(r=this._addCurrentView(r),this._storeMeterLog(r),0):(this._isUserAtLimit(r)?e=-1:(r=this._addCurrentView(r),this._storeMeterLog(r),e=this._getMeterCount(r)),this.set("meterCount",this._getMeterCount(r)),this._sendMeterLoadEvent(r),e)}_getMeterCount(e){return"object"!=typeof e?0:Object.keys(e).length}_removeExpiredViews(e){const t=e&&"object"==typeof e?{...e}:{},r=new Date,n=this.get("expirationTime");return Object.keys(t).forEach((e=>{const s=new Date(t[e].timestamp);s.setTime(s.getTime()+n),s.getTime()<=r.getTime()&&delete t[e]})),t}_addCurrentView(e){const t=e&&"object"==typeof e?{...e}:{},r=this.getPageName(),n=(new Date).toUTCString();return t[r]={section:this.getSections(),timestamp:n},t}_fetchMeterLog(){return JSON.parse(window.localStorage.getItem(this.meterCookie))}_storeMeterLog(e){this._getMeterCount(e)>0&&window.localStorage.setItem(this.meterCookie,JSON.stringify(e))}_isSectionExcluded(){if("true"===this.get("excludedSectionsEnabled")){const e=this.getSections().split("|");for(let t=0;t<e.length;t++)if(this.get("excludedSections").indexOf(e[t])>=0)return!0}return!1}_isPageAlreadySeen(e){return void 0!==e[this.getPageName()]}_isUserAtLimit(e){return this._getMeterCount(e)>=this.get("meterLimit")}getPageName(){return window.SEATIMESCO&&window.SEATIMESCO.contentInfo&&window.SEATIMESCO.contentInfo.post_id?"article_"+window.SEATIMESCO.contentInfo.domain+"/"+window.SEATIMESCO.contentInfo.post_id:""}getSections(){return window.SEATIMESCO&&window.SEATIMESCO.contentInfo&&window.SEATIMESCO.contentInfo.sections_all?window.SEATIMESCO.contentInfo.sections_all:""}_isInstitutionalUser(e){const t=this.get("institutionalAccessIds");return"true"===this.get("institutionalAccessEnabled")&&!!e&&t.indexOf(e)>=0}_convertExpirationTime(e){return e=parseInt(e),isNaN(e)?0:24*e*60*60*1e3}_sendMeterLoadEvent(e){if(window.SEATIMESCO&&window.STEventManager){const t=this._getMessageViewCount(),r=this._getDaysSinceOldestView(e,new Date),n={meteredStoreCount:this.get("meterCount"),daysSinceFirstCookie:r,lifetimeMessages:t,countMethod:this.get("meterClearingMechanism")};window.STEventManager.dataLayerEvent("meterEvent","meter","load","user",null,!0,n)}}_getMessageViewCount(){let e=parseInt((0,t.ej)(this.paywallMessageCountCookie));return e=e||0,e}_getDaysSinceOldestView(e,t){const r=e&&"object"==typeof e?{...e}:{};let n=t;Object.keys(r).forEach((e=>{const t=new Date(r[e].timestamp);t.getTime()<n.getTime()&&(n=t)}));let s=t.getTime()-n.getTime();return s/=864e5,Math.floor(s)}};var o=s(3311),a=s.n(o),l=s(8718),c=s.n(l),u=s(3493),d=s.n(u);const p=()=>SEATIMESCO.contentInfo||SEATIMESCO.contentInfo.contentType?"homepage"==SEATIMESCO.contentInfo.contentType?"home":("section_front"==SEATIMESCO.contentInfo.contentType||"story"==SEATIMESCO.contentInfo.contentType)&&(SEATIMESCO.contentInfo.section_tier2||SEATIMESCO.contentInfo.section_tier1)||"":"",g=()=>SEATIMESCO.contentInfo||SEATIMESCO.contentInfo.contentType?"section_front"==SEATIMESCO.contentInfo.contentType&&SEATIMESCO.contentInfo.section_tier2?"subsection_front":SEATIMESCO.contentInfo.contentType:"",h=()=>SEATIMESCO.contentInfo&&SEATIMESCO.contentInfo.page_id&&"page"==SEATIMESCO.contentInfo.contentType?SEATIMESCO.contentInfo.page_id:0,f=()=>SEATIMESCO.browser||SEATIMESCO.browser.layout?SEATIMESCO.browser.layout.isDesktop?"desktop":SEATIMESCO.browser.layout.isTablet?"tablet":SEATIMESCO.browser.layout.isMobile?"mobile":"":"",w=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.location=e,this.type=t,this.layout=r,this.props=n}async generateModule(e,t,r,n){return new Promise((i=>("ad-block"==t&&s.e(13).then(s.bind(s,4999)).then((e=>{const t=e.default;i(new t({...n}))})),"autopay"==t&&"overlay"==e&&s.e(174).then(s.bind(s,760)).then((e=>{const t=e.default;i(new t({...n}))})),"bill-overdue"==t&&"overlay"==e&&s.e(349).then(s.bind(s,695)).then((e=>{const t=e.default;i(new t({...n}))})),"credit-card-expiring"==t&&"overlay"==e&&s.e(975).then(s.bind(s,5767)).then((e=>{const t=e.default;i(new t({...n}))})),"declined-payment"==t&&"overlay"==e&&s.e(126).then(s.bind(s,8197)).then((e=>{const t=e.default;i(new t({...n}))})),"generic"==t&&"overlay"==e&&"bar"==r&&s.e(587).then(s.bind(s,4589)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"upgrade-browser"==t&&"overlay"==e&&"bar"==r&&s.e(587).then(s.bind(s,4589)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"custom-data"==t&&"overlay"==e&&"bar"==r&&s.e(0).then(s.bind(s,9216)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"newsletter-signup"!=t||"atf"!=e&&"btf"!=e||Promise.all([s.e(990),s.e(259),s.e(995)]).then(s.bind(s,1270)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),"newsletter-signup"==t&&"footer"==e&&Promise.all([s.e(990),s.e(259),s.e(386)]).then(s.bind(s,7600)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),"newsletter-signup"==t&&"inset"==e&&Promise.all([s.e(990),s.e(259),s.e(46)]).then(s.bind(s,6086)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),"newsletter-signup"==t&&"inset-custom"==e&&window.SEATIMESCO&&window.SEATIMESCO.customNewsletterSignup&&Promise.all([s.e(990),s.e(259),s.e(46)]).then(s.bind(s,6086)).then((t=>{const r=t.default;i(new r({...window.SEATIMESCO.customNewsletterSignup,slot:e}))})),"newsletter-signup"==t&&"overlay"==e&&"bar"==r&&Promise.all([s.e(990),s.e(259),s.e(977)]).then(s.bind(s,4754)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"newsletter-signup"==t&&"overlay"==e&&"splash-desktop"==r&&Promise.all([s.e(990),s.e(259),s.e(766)]).then(s.bind(s,2626)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"newsletter-signup"==t&&"overlay"==e&&"splash-mobile"==r&&Promise.all([s.e(990),s.e(259),s.e(542)]).then(s.bind(s,9070)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"paperless-billing"==t&&"overlay"==e&&s.e(931).then(s.bind(s,8530)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),"paywall"==t&&"overlay"==e&&"corner"==r&&s.e(954).then(s.bind(s,3385)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"paywall"==t&&"overlay"==e&&"bar"==r&&s.e(629).then(s.bind(s,7425)).then((t=>{const s=t.default;i(new s({...n,slot:e,layout:r}))})),"subscription-promo"==t&&"postscript"==e&&s.e(821).then(s.bind(s,4520)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),"subscription-promo"==t&&"topOverlay"==e&&s.e(761).then(s.bind(s,6091)).then((t=>{const r=t.default;i(new r({...n,slot:e}))})),null)))}async render(e){e&&1==e.nodeType||(e=document.createElement("div"));const t=await this.generateModule(this.location,this.type,this.layout,this.props);return null===t||"function"!=typeof t.render?(console.warn("UserMessage Warning: The module must have a render() method. Make sure this.generateModule() returns an object that implements render()."),null):(e.appendChild(t.render()),e)}},y=class{constructor(e,t){this.reader=e,this.paywall=t,this.renderableSlots={},this.overlayMessage={},this.topOverlayMessage={},this.isMessageInCurrentPageType=this.isMessageInCurrentPageType.bind(this),this.isMessageInUserType=this.isMessageInUserType.bind(this)}init(){if(null!==document.querySelector(".st-paywall__overlay-messaging .paywall-loaded"))return;const e=this.getMessages().filter(this.isMessageEnabled).filter(this.isMessageInCurrentPageType).filter(this.isMessageForDevice).filter(this.isMessageInUserType).filter(this.isMessageLookingForStorageData);this.prepareRenderableMessages(e),this.checkRenderability(),this.setupScrollListener()}isMessageEnabled(e){return!(!e.enabled||1!==e.enabled)}isMessageInCurrentPageType(e){if(e.pageTypes&&Array.isArray(e.pageTypes)){const t=g();return e.pageTypes.filter((r=>{let{value:n}=r;return"page"===n&&"page"===t?this.isMessageInCurrentPage(e):"section_front"===n&&"section_front"===t||"subsection_front"===n&&"subsection_front"===t||"story"===n&&"story"===t?this.isMessageInCurrentSection(e):n==t})).length>0}return this.isMessageInCurrentSection(e)}isMessageInCurrentPage(e){return!(!e.pageIds||!Array.isArray(e.pageIds))&&e.pageIds.filter((e=>e==h())).length>0}isMessageInCurrentSection(e){return!(e.sections&&Array.isArray(e.sections)&&e.sections.length>0)||e.sections.filter((e=>e.value==p())).length>0}isMessageForDevice(e){return!e.deviceTypes||e.deviceTypes.filter((e=>e.value==f())).length>0}isMessageInUserType(e){return!e.userTypes||e.userTypes.filter((e=>{switch(e.value){case"subscriber":return this.reader.isSubscriber()&&!this.reader.isSharedSubscriber()&&!this.reader.isFreeTrialUser();case"shared-subscriber":return this.reader.isSubscriber()&&this.reader.isSharedSubscriber();case"free-trial-user":return this.reader.isSubscriber()&&this.reader.isFreeTrialUser();default:return e.value==this.reader.get("userType")}})).length>0}isMessageLookingForStorageData(e){return!(e.storageType&&e.storageItem&&e.storageValue)||("local-storage"==e.storageType?window.localStorage.getItem(e.storageItem)==e.storageValue:"cookie"!=e.storageType||(0,t.ej)(e.storageItem)==e.storageValue)}prepareRenderableMessages(e){const t=e.filter((e=>"overlay"==e.slot)).sort(this.comparePriority),r=e.filter((e=>"topOverlay"==e.slot)).sort(this.comparePriority),n=e.filter((e=>"atf"==e.slot)).sort(this.comparePriority),s=e.filter((e=>"btf"==e.slot)).sort(this.comparePriority),i=e.filter((e=>"inset"==e.slot)).sort(this.comparePriority),o=e.filter((e=>"inset-custom"==e.slot)).sort(this.comparePriority),l=e.filter((e=>"postscript"==e.slot)).sort(this.comparePriority),c=e.filter((e=>"footer"==e.slot)).sort(this.comparePriority),u={overlay:{message:a()(t,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("overlay"),waitForViewport:!1},topOverlay:{message:a()(r,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("topOverlay"),waitForViewport:!1},atf:{message:a()(n,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("atf"),waitForViewport:!0},btf:{message:a()(s,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("btf"),waitForViewport:!0},inset:{message:a()(i,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("inset"),waitForViewport:!0},"inset-custom":{message:a()(o,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("inset-custom"),waitForViewport:!0},postscript:{message:a()(l,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("postscript"),waitForViewport:!0},footer:{message:a()(c,(e=>this.canMessageRender(e))),container:this.getMessagingContainer("footer"),waitForViewport:!0}};Object.keys(u).forEach((e=>{u[e].message&&u[e].container||delete u[e]})),SEATIMESCO.userMessaging.slots=SEATIMESCO.userMessaging.slots||{},Object.keys(u).forEach((e=>{SEATIMESCO.userMessaging.slots[e]=u[e].message})),this.overlayMessage=!(!u.overlay||!u.overlay.message)&&u.overlay.message,this.topOverlayMessages=!(!u.topOverlay||!u.topOverlay.message)&&u.topOverlay.message,this.renderableSlots=u}comparePriority(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0}getMessages(){return SEATIMESCO.userMessaging&&SEATIMESCO.userMessaging.messages?SEATIMESCO.userMessaging.messages:[]}getMessagingContainer(e){return document.getElementById("userMessaging"+(0,t.fm)(e))||!1}canMessageRender(e){if(this.reader.isInQueryString(e.id))return!0;switch(e.type){case"ad-block":return!(!this.reader.isInAdBlockDrawbridgeTest(e.abTesting)||!this.reader.shouldSeeAdBlockDrawbridge()||this.reader.hasInstitutionalAccess(this.paywall.get("institutionalAccessEnabled"),this.paywall.get("institutionalAccessIds"),this.paywall.institutionalUserCookie));case"autopay":return!(!this.reader.isSubscriber()||this.reader.isSharedSubscriber()||this.reader.isSignedUpForAutopay()||this.reader.hasSeenAutopayMessage());case"bill-overdue":return!(!this.reader.isSubscriber()||this.reader.isSharedSubscriber()||this.reader.isSignedUpForAutopay()||!this.reader.hasOverdueBill()||this.reader.hasSeenBillOverdueMessage());case"credit-card-expiring":return!(!this.reader.isSubscriber()||this.reader.isSharedSubscriber()||!this.reader.hasExpiringCreditCard()||this.reader.hasSeenCreditCardExpiringNotification());case"declined-payment":return!(!this.reader.isSubscriber()||this.reader.isSharedSubscriber()||!this.reader.hasDeclinedPayment()||this.reader.hasSeenDeclinedPaymentMessage());case"generic":return!this.reader.hasSeenGenericMessage(e.name);case"custom-data":return!this.reader.hasSeenCustomDataMessage(e.name);case"newsletter-signup":return!(this.reader.isAlreadySubscribedToNewsletter(e.newsletter)||this.reader.isFromNewsletter()||"overlay"==e.slot&&this.reader.hasSeenNewsletterSignup(e.layout)||"inset"==e.slot&&this.overlayMessage&&"newsletter-signup"==this.overlayMessage.type&&this.overlayMessage.newsletter==e.newsletter);case"paperless-billing":return!(!this.reader.isSubscriber()||this.reader.isSharedSubscriber()||this.reader.isSignedUpForPaperless()||this.reader.hasSeenPaperlessBillingNotification());case"paywall":return!!(this.paywall.messagesEnabled()&&e.pageviewCount===this.paywall.getMeterStatus()&&e.paywallConfigs.filter((e=>e.value===this.paywall.get("configName"))).length>0);case"subscription-promo":return!("postscript"==e.slot&&SEATIMESCO.contentInfo&&SEATIMESCO.contentInfo.paragraphCount&&SEATIMESCO.contentInfo.paragraphCount<12);case"upgrade-browser":return!!(window.SEATIMESCO.browser&&window.SEATIMESCO.browser.support&&window.SEATIMESCO.browser.support.showUpgrade);default:return!1}}setupScrollListener(){this.checkRenderabilityThrottled=d()(this.checkRenderability.bind(this),500),window.addEventListener("scroll",this.checkRenderabilityThrottled)}removeScrollListener(){this.checkRenderabilityThrottled&&window.removeEventListener("scroll",this.checkRenderabilityThrottled)}checkRenderability(){Object.keys(this.renderableSlots).forEach((e=>{(!this.renderableSlots[e].waitForViewport||this.renderableSlots[e].waitForViewport&&(0,t.pn)(this.renderableSlots[e].container))&&(this.renderUserMessage(this.renderableSlots[e].message,this.renderableSlots[e].container),delete this.renderableSlots[e],0===Object.keys(this.renderableSlots).length&&this.removeScrollListener())}))}renderUserMessage(e,t){new w(e.slot,e.type,e.layout?e.layout:"",this.buildProps(e)).render(t),t.classList.add("loaded")}buildProps(e){let t={};switch(e.type){case"newsletter-signup":if(void 0!==SEATIMESCO.userMessaging&&void 0!==SEATIMESCO.userMessaging.newsletters){const r=SEATIMESCO.userMessaging.newsletters,n=SEATIMESCO.userMessaging.newsletters.emailsNewsroom;n&&n[e.newsletter]&&(t=n[e.newsletter],t.dataExtensionIdExtra=r.dataExtensionIdExtra,t.subscriptionEndpoint=r.subscriptionEndpoint)}t.messageFrequency=e.frequency,t.messageCloseFrequency=e.closeFrequency,t.message=e.message,t.headline=e.headline,t.buttonText=void 0!==e.buttonText?e.buttonText:"Sign up";break;case"paywall":t={...c()(e,["headline","message","buttonText","buttonUrl","pageviewCount","layout","hideFooter"]),userType:this.reader.get("userType")};break;default:t=e}return t}},b=class{constructor(){this.handleApiKeyResponse=this.handleApiKeyResponse.bind(this),this.handleFormResponse=this.handleFormResponse.bind(this)}handleResponse(e){this.googleIdToken=e.credential;const r="auto"===e.select_by?"autoLogin":"click";(0,t.Nf)("analyticsEvent","Registration","googleOneTap - "+r,""),this.getApiKey()}isEnabled(){return!!(window.SEATIMESCO&&window.SEATIMESCO.userMessaging&&window.SEATIMESCO.userMessaging.oneTap)&&!!window.SEATIMESCO.userMessaging.oneTap.enabled&&window.SEATIMESCO.userMessaging.oneTap.enabled}getUrl(){if(window.SEATIMESCO&&window.SEATIMESCO.singleSignOn&&window.SEATIMESCO.singleSignOn.info){const e=window.SEATIMESCO.singleSignOn.info.ssoEnvironment;if(e)return`https://${e}seattletimes.com/api/googleonetap`}return!1}getClientId(){return!!(window.SEATIMESCO&&window.SEATIMESCO.userMessaging&&window.SEATIMESCO.userMessaging.oneTap)&&!!window.SEATIMESCO.userMessaging.oneTap.client_id&&window.SEATIMESCO.userMessaging.oneTap.client_id}getApiKey(){const e=new XMLHttpRequest;e.addEventListener("load",this.handleApiKeyResponse),e.addEventListener("error",this.handleApiKeyResponse),e.open("GET",window.location.protocol+"//"+window.location.host+"/wp-json/sso-api/auth"),e.send()}handleApiKeyResponse(e){const t=JSON.parse(e.target.responseText);200===e.target.status&&t.api_token?this.sendData(t.api_token):console.warn("Could not build API auth token")}sendData(e){if(this.getUrl()){const t=new FormData;t.append("apikey",e),t.append("credential",this.googleIdToken);const r=new XMLHttpRequest;r.addEventListener("load",this.handleFormResponse),r.addEventListener("error",this.handleFormResponse),r.open("post",this.getUrl(),!0),r.withCredentials=!0,r.send(t)}else console.warn("Could not get URI")}handleFormResponse(e){if("error"==e.type)return(0,t.Nf)("analyticsEvent","Registration","googleOneTap - error","API request failed"),void console.warn("Could not complete One-Tap request");const r=JSON.parse(e.target.responseText);200===r.code?(window.STEventManager.completedEvent("singleSignOn:loggedInAsync"),this.responseGAEvent(r.data)):(0,t.Nf)("analyticsEvent","Registration","googleOneTap - error",r.error.reason)}responseGAEvent(e){let r,n="Registration";"SUCCESS_REGISTERED"===e?(r="registered",(0,t.Nf)("analyticsEvent",n,"freeRegistration - accountConfirmed","googleOneTap")):"SUCCESS_AUTHENTICATED"===e?(n="login",r="loginConfirmed"):"SUCCESS_MERGED"===e?(n="login",r="merged"):r=e.toLowerCase(),(0,t.Nf)("analyticsEvent",n,"googleOneTap - "+r,"")}notificationGAEvent(e){e.isDisplayed()?(0,t.Nf)("analyticsEvent","Registration","googleOneTap - displayed",""):e.isSkippedMoment()&&"user_cancel"===e.getSkippedReason()&&(0,t.Nf)("analyticsEvent","Registration","googleOneTap - dismissed","")}},v=class{shouldIncognitoRun(e,t){if(this.isUserType(e)&&this.isPrivacyDetected()&&!window.SEATIMESCO.paywall.pageExcluded&&"story"==window.SEATIMESCO.contentInfo.contentType&&!t){const e=this.render();throw this.displayNotification(),this.removeParagraphs(),this.setEventListeners(e),new Error("Stopped paywall instantiation because a private browser has been detected.")}}isUserType(e){return"anonymous"===e||"registered"===e||"former"===e}isPrivacyDetected(){return window.STEventManager.data["paywallAvoidance:detection"]}displayNotification(){const e=`incognitoBlockInset - ${window.SEATIMESCO.contentInfo.contentType} - display`;window.STEventManager.dataLayerEvent("analyticsEvent","paywallAvoidance",e,document.location.href)}removeParagraphs(){const e=document.getElementById("article-content");if(e){const t=e.children;for(let r=0;r<t.length;r++)r>1&&"userMessagingIn-story"!==t[r].id&&(e.removeChild(t[r]),r--)}}setEventListeners(e){this.buttonOne=e.querySelector("#blockerButtonOne"),this.loginLink=e.querySelector("#blockerLoginLink"),this.buttonOne.addEventListener("click",(e=>{const t=`incognitoBlockInsetSubscribe - ${window.SEATIMESCO.contentInfo.contentType} - click`;window.STEventManager.dataLayerEvent("analyticsEvent","paywallAvoidance",t,document.location.href)})),this.loginLink.addEventListener("click",(e=>{const t=`incognitoBlockInsetLogin - ${window.SEATIMESCO.contentInfo.contentType} - click`;window.STEventManager.dataLayerEvent("analyticsEvent","paywallAvoidance",t,document.location.href)}))}render(){const e=`https://${(0,t.Jd)()}seattletimes.com`,r=document.createElement("div");return r.innerHTML=`\n      <div class="fade"></div>\n      <div class="modal-incognito u-tc mt-5">\n        <h3 class="font-incognito-headline u-serif u-off-black mb-1">Your browser is set to private mode.</h3>\n        <p class="font-incognito-paragraph u-serif u-off-black mb-4">To continue reading, log in or subscribe.</p>\n        <a href=" https://www.seattletimes.com/subscribe/signup-offers/?subsource=privatebrowsing" id="blockerButtonOne" class="st-return button-incognito st-button u-tc mb-2">Subscribe</a>\n        <p class="font-incognito-paragraph u-sans u-off-black mt-1 mb-0">Already a subscriber? <a class="st-return u-blue" id="blockerLoginLink" href="${e}/accountcenter/">Log in now.</a></p>\n      </div>\n    `,document.querySelector("#userMessagingIn-story").appendChild(r)}};class S{constructor(){this.reader=new n,this.paywall=new i({meterCookie:"pmStories",messageCountCookie:"pmCount",institutionalCookie:"iss00"}),this.incognito=new v,this.initiatedCount=0,this.initiatePaywall()}listenForOptimizelyRunning(){window.addEventListener("message",(e=>{const t=e.origin;"seattletimes.com"===t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)&&"STSegment Optimize test running"===e.data&&this.paywall.set("STSegmentOptimizeTest",!0)}),!1)}initiatePaywall(){this.reader.fetchUserType().then((()=>{0===this.initiatedCount&&this.listenForOptimizelyRunning()})).then((()=>this.paywall.setUserType(this.reader.get("userType")))).then((()=>this.reader.getUserTargeting())).then((()=>this.paywall.parseConfig())).then((()=>this.incognito.shouldIncognitoRun(this.reader.get("userType"),this.paywall.getIsInstitutionalUser()))).then((()=>this.checkForOptimizeTest())).then((()=>{if(-1===this.paywall.getMeterStatus())return this.paywall.blockAccess()})).then((()=>this.runGoogleOneTap())).catch((e=>console.warn(e)))}runGoogleOneTap(){const e=new b,t=e.isEnabled(),r=e.getClientId();if(void 0!==window.google&&void 0!==window.google.accounts&&r){const n=t=>{e.handleResponse(t)};window.google.accounts.id.initialize({auto_select:!0,client_id:r,cancel_on_tap_outside:!1,state_cookie_domain:"seattletimes.com",callback:n}),"anonymous"===this.reader.get("userType")&&t?window.google.accounts.id.prompt((t=>{(t.isNotDisplayed()||t.isSkippedMoment())&&this.runMessaging(),e.notificationGAEvent(t)})):this.runMessaging()}else this.runMessaging()}runMessaging(){this.reader.fetchData().then((()=>{this.messaging=new y(this.reader,this.paywall),this.messaging.init()})).catch((e=>console.warn(e)))}checkForOptimizeTest(){if(this.paywall.get("STSegmentOptimizeTest")&&0===this.initiatedCount){this.initiatePaywall(),this.initiatedCount++;const e=void 0!==SEATIMESCO.userSegments?Object.keys(SEATIMESCO.userSegments)[0]+": "+Object.values(SEATIMESCO.userSegments)[0]:"STSegment is undefined";return Promise.reject(new Error("Halting the process for an Optimize A/B test \n"+e))}this.initiatedCount++}}(()=>{if(window.STEventManager&&window.SEATIMESCO.experiments&&window.SEATIMESCO.experiments.messagingWait){const e=window.SEATIMESCO.experiments.timeout?window.SEATIMESCO.experiments.timeout:4e3;window.STEventManager.subscribe(["optimizeCompleted"],e).then((()=>{new S}))}else new S})()})()})();